<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DraftEngine</title>
    <link rel="stylesheet" href="./app/styles.css" />
  </head>
  <body>
    <div class="bg-shape bg-shape-a"></div>
    <div class="bg-shape bg-shape-b"></div>
    <main class="layout">
      <header class="hero">
        <p class="kicker">DraftEngine</p>
        <h1>Composition Draft Workflow</h1>
          <p class="subtitle">
          Configure team context, analyze composition readiness, and inspect deterministic next-pick trees.
        </p>
      </header>

      <div class="app-shell">
        <aside class="panel side-menu">
          <h2>Navigation</h2>
          <p class="meta">Workflow is your default page. Open these secondary pages when needed.</p>
          <button class="side-menu-link" data-tab="team-config" type="button">Team Context</button>
          <button class="side-menu-link" data-tab="player-config" type="button">Player Config</button>
          <button class="side-menu-link" data-tab="explorer" type="button">Champion Explorer</button>
        </aside>

        <div class="main-content">
          <section id="tab-explorer" class="tab-panel">
            <div class="panel">
              <div class="button-row">
                <button id="explorer-back-workflow" class="ghost" data-tab="workflow" type="button">Back to Workflow</button>
              </div>
              <h2>Champion Explorer</h2>
              <p class="meta">Secondary tool surface for broad champion discovery and filtering.</p>
            </div>
            <div class="panel">
              <h2>Explorer Filters</h2>
              <p class="meta">Modern filter block: combine multi-select filters and clear include/exclude logic to find comps faster.</p>
              <div class="button-row">
                <button id="explorer-clear-all" class="ghost" type="button">Clear All Filters</button>
              </div>
              <div class="grid grid-3">
                <label>
                  Search
                  <input id="explorer-search" type="search" placeholder="Champion name" />
                </label>
                <label>
                  Roles (multi-select)
                  <select id="explorer-role" multiple size="6"></select>
                </label>
                <label>
                  Damage Type (multi-select)
                  <select id="explorer-damage" multiple size="6"></select>
                </label>
                <label>
                  Scaling
                  <select id="explorer-scaling"></select>
                </label>
                <label>
                  Sort Cards
                  <select id="explorer-sort"></select>
                </label>
                <label>
                  Include Tags
                  <select id="explorer-include-tags" multiple size="6"></select>
                </label>
                <label>
                  Exclude Tags
                  <select id="explorer-exclude-tags" multiple size="6"></select>
                </label>
                <div class="explorer-tag-actions">
                  <button id="explorer-clear-include" class="ghost" type="button">Clear Include Tags</button>
                  <button id="explorer-clear-exclude" class="ghost" type="button">Clear Exclude Tags</button>
                </div>
              </div>
              <p class="meta">Include and Exclude tags are mutually exclusive. Selecting one removes it from the other.</p>
            </div>
            <div class="panel">
              <h2>Champion Cards</h2>
              <p id="explorer-count" class="meta"></p>
              <div id="explorer-results" class="card-grid"></div>
            </div>
          </section>

          <section id="tab-workflow" class="tab-panel is-active">
            <section id="builder-stage-guide" class="panel stage-guide" aria-live="polite">
              <h2 id="builder-workflow-title">Draft Workflow</h2>
              <ul id="builder-intent-help-list" class="guidance-list"></ul>
              <div class="button-row stage-guide-actions">
                <button id="builder-continue-validate" type="button">Continue to Inspection</button>
                <button id="builder-clear" type="button" class="ghost">Clear Composition</button>
              </div>
              <p id="builder-stage-progress" class="meta" hidden></p>
              <p id="builder-stage-help" class="meta" hidden></p>
            </section>
            <div class="builder-grid">
              <aside id="builder-stage-setup" class="panel stage-panel">
                <h2 id="builder-stage-setup-title">Setup</h2>
                <p id="builder-stage-setup-meta" class="meta">Set current composition state and generation constraints.</p>
                <div class="stack">
                  <label>
                    Active Team
                    <select id="builder-active-team"></select>
                  </label>
                  <p id="builder-team-help" class="meta"></p>
                  <section class="slot-inputs-block">
                    <h3>Player Slots</h3>
                    <div class="slot-list">
                      <label class="slot-row" id="slot-row-Top" data-slot="Top">
                        <div class="slot-row-head">
                          <span id="slot-order-Top" class="slot-order">#1</span>
                          <span id="slot-label-Top">Top</span>
                          <span id="slot-status-Top" class="slot-status">Pending</span>
                        </div>
                        <select id="slot-Top"></select>
                      </label>
                      <label class="slot-row" id="slot-row-Jungle" data-slot="Jungle">
                        <div class="slot-row-head">
                          <span id="slot-order-Jungle" class="slot-order">#2</span>
                          <span id="slot-label-Jungle">Jungle</span>
                          <span id="slot-status-Jungle" class="slot-status">Pending</span>
                        </div>
                        <select id="slot-Jungle"></select>
                      </label>
                      <label class="slot-row" id="slot-row-Mid" data-slot="Mid">
                        <div class="slot-row-head">
                          <span id="slot-order-Mid" class="slot-order">#3</span>
                          <span id="slot-label-Mid">Mid</span>
                          <span id="slot-status-Mid" class="slot-status">Pending</span>
                        </div>
                        <select id="slot-Mid"></select>
                      </label>
                      <label class="slot-row" id="slot-row-ADC" data-slot="ADC">
                        <div class="slot-row-head">
                          <span id="slot-order-ADC" class="slot-order">#4</span>
                          <span id="slot-label-ADC">ADC</span>
                          <span id="slot-status-ADC" class="slot-status">Pending</span>
                        </div>
                        <select id="slot-ADC"></select>
                      </label>
                      <label class="slot-row" id="slot-row-Support" data-slot="Support">
                        <div class="slot-row-head">
                          <span id="slot-order-Support" class="slot-order">#5</span>
                          <span id="slot-label-Support">Support</span>
                          <span id="slot-status-Support" class="slot-status">Pending</span>
                        </div>
                        <select id="slot-Support"></select>
                      </label>
                    </div>
                  </section>
                  <p id="builder-setup-feedback" class="error-inline" hidden></p>
                  <div class="draft-order-block">
                    <h3>Node Draft Order</h3>
                    <p class="meta">Drag roles to reorder priority. Generation always fills the first unfilled role in this order.</p>
                    <p id="builder-next-role-readout" class="meta"></p>
                    <ul id="builder-draft-order" class="draft-order-list"></ul>
                  </div>
                  <details id="builder-advanced-controls" class="advanced-controls">
                    <summary>Advanced Controls</summary>
                    <div class="stack advanced-controls-content">
                      <fieldset id="builder-toggles" class="toggle-group">
                        <legend>Required Toggles</legend>
                      </fieldset>
                      <label>
                        Excluded Champions
                        <input id="builder-excluded-search" type="search" placeholder="Filter champion list" />
                      </label>
                      <div id="builder-excluded-options" class="excluded-options"></div>
                      <p class="meta">Multi-select checklist. Excluded champions are never offered in selectors or generated tree nodes.</p>
                      <div id="builder-excluded-pills" class="chip-row"></div>
                      <div class="grid grid-2">
                        <label>
                          maxDepth
                          <input id="builder-max-depth" type="number" min="1" max="5" step="1" />
                        </label>
                        <label>
                          maxBranch
                          <input id="builder-max-branch" type="number" min="1" max="25" step="1" />
                        </label>
                      </div>
                    </div>
                  </details>
                </div>
              </aside>

              <section id="builder-stage-inspect" class="panel stage-panel">
                <h2 id="builder-stage-inspect-title">Inspect</h2>
                <p id="builder-stage-inspect-meta" class="meta">Inspect a node to see slot-level impact and cumulative reasons that increase its score.</p>
                <p id="builder-checks-readiness" class="meta"></p>
                <div id="builder-team-context" class="team-context"></div>
                <h3>Required Checks</h3>
                <ul id="builder-required-checks" class="check-list"></ul>
                <div class="optional-checks-header">
                  <h3>Optional Checks</h3>
                  <button id="builder-toggle-optional-checks" class="ghost" type="button">Show Optional Checks</button>
                </div>
                <ul id="builder-optional-checks" class="check-list" hidden></ul>
                <div>
                  <h3>Missing Needs</h3>
                  <ul id="builder-missing-needs" class="missing-list"></ul>
                </div>
                <div class="button-row">
                  <button id="builder-generate" type="button">Generate Tree</button>
                </div>
                <p id="builder-inspect-feedback" class="error-inline" hidden></p>
                <div class="tree-toolbar">
                  <label>
                    Density
                    <select id="tree-density">
                      <option value="summary">Summary</option>
                      <option value="detailed">Detailed</option>
                    </select>
                  </label>
                  <label>
                    Search Node
                    <input id="tree-search" type="search" placeholder="Champion, role, or slot value" />
                  </label>
                  <label>
                    Min Score
                    <input id="tree-min-score" type="number" step="1" min="0" value="0" />
                  </label>
                </div>
                <div class="button-row">
                  <button id="tree-expand-all" type="button" class="ghost">Expand All</button>
                  <button id="tree-collapse-all" type="button" class="ghost">Collapse All</button>
                </div>
                <div id="builder-tree-summary" class="tree-summary"></div>
                <div class="panel tree-map-panel">
                  <h3>Tree Map</h3>
                  <p class="meta">Graph view of expansion depth. Click any node marker to inspect it.</p>
                  <svg id="builder-tree-map" class="tree-map" viewBox="0 0 900 320" preserveAspectRatio="xMidYMid meet"></svg>
                </div>
                <div id="builder-tree" class="tree"></div>
                <div id="builder-preview" class="preview"></div>
              </section>
            </div>
          </section>

          <section id="tab-team-config" class="tab-panel">
            <div class="panel">
              <div class="button-row">
                <button id="team-config-back-workflow" class="ghost" data-tab="workflow" type="button">Back to Workflow</button>
              </div>
              <h2>Team Context</h2>
              <p class="meta">Dedicated surface for team defaults and roster-pool context used by composition generation.</p>
              <div class="grid grid-2">
                <label>
                  Default Team for Preset
                  <select id="team-config-default-team"></select>
                </label>
                <label>
                  Active Team for Workflow
                  <select id="team-config-active-team"></select>
                </label>
              </div>
              <p id="team-config-default-help" class="meta"></p>
              <p id="team-config-active-help" class="meta"></p>
              <div class="button-row">
                <button id="team-config-apply-active" type="button">Apply Active Team to Workflow</button>
              </div>
            </div>
            <div class="panel">
              <h2>Roster Pool Preview</h2>
              <p id="team-config-pool-summary" class="meta"></p>
              <div id="team-config-pool-grid" class="grid grid-2"></div>
            </div>
          </section>

          <section id="tab-player-config" class="tab-panel">
            <div class="panel">
              <div class="button-row">
                <button id="player-config-back-workflow" class="ghost" data-tab="workflow" type="button">Back to Workflow</button>
              </div>
              <h2>Player Config</h2>
              <p class="meta">Edit individual player champion pools used by workflow team context.</p>
              <div class="grid grid-2">
                <label>
                  Team
                  <select id="player-config-team"></select>
                </label>
              </div>
              <p id="player-config-summary" class="meta"></p>
              <p id="player-config-feedback" class="meta"></p>
              <div id="player-config-grid" class="grid grid-2"></div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <script type="module" src="./app/main.js"></script>
  </body>
</html>
